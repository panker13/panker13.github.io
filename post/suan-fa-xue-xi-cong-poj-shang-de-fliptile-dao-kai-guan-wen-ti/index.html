<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>算法学习：从poj上的Fliptile到开关问题 | Panker</title>
<meta name="description" content="整个世界森林里的老虎全都融化成黄油。">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="shortcut icon" href="https://panker13.github.io/favicon.ico?v=1616496218498">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://unpkg.com/papercss@1.6.1/dist/paper.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://panker13.github.io/styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>


<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />


  </head>
  <body>
  
    <nav class="navbar border fixed split-nav">
  <div class="nav-brand">
    <h3><a href="https://panker13.github.io">Panker</a></h3>
  </div>
  <div class="collapsible">
    <input id="collapsible1" type="checkbox" name="collapsible1">
    <button>
      <label for="collapsible1">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </label>
    </button>
    <div class="collapsible-body">
      <ul class="inline">
        
          <li>
            
              <a href="/" class="menu">
                首页
              </a>
            
          </li>
        
          <li>
            
              <a href="/archives" class="menu">
                归档
              </a>
            
          </li>
        
          <li>
            
              <a href="/tags" class="menu">
                标签
              </a>
            
          </li>
        
          <li>
            
              <a href="/post/about" class="menu">
                关于
              </a>
            
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div id="top" class="row site">
      <div class="sm-12 md-8 col">
        <div class="paper">
          <article class="article">
            <h1>算法学习：从poj上的Fliptile到开关问题</h1>
            <p class="article-meta">
              2021-03-23
              
            </p>
            
            <div class="post-content">
              <h3 id="写在前面本人蒟蒻写此分享来督促自己复习并与大家分享有关开关问题的一些技巧以及例题代码">写在前面：本人蒟蒻，写此分享来督促自己复习，并与大家分享有关开关问题的一些技巧以及例题代码</h3>
<p><a href="http://poj.org/problem?id=3279">Fliptile题目链接</a><br>
<a href="https://yq.aliyun.com/articles/267150">参考题解</a><br>
<a href="https://blog.csdn.net/ac_hell/article/details/51077320">翻转问题的主要技巧以及规律</a></p>
<h3 id="详细内容见代码及注释">详细内容见代码及注释</h3>
<h3 id="代码如有疏漏之处敬请指出">代码（如有疏漏之处，敬请指出）😁</h3>
<pre><code>//先用状态压缩的方法枚举第一行的翻转情况，然后通过第一行的情况来递推出第二行的情况
//即：已知了第一行的情况了，需要通过第二行来修正第一行的情况
//（因为第一行已经被枚举固定了，所以除了第二行之外，其他行无法修改第一行）
//以此类推：其他所有行的情况都可以被递推出（即：是已经固定的了）
//注意：除了最后一行，因为没有最后一行没有下一行来帮最后一行修正
//(所以最后一行也是固定的，无法修正，最后应该检查一下最后一行是否符合题意即可)
//关键是：由下一行来处理上一行（而且是垂直的上一行，因为只有垂直的上一行是固定的）

# include&lt;iostream&gt;
# include&lt;algorithm&gt;
# include&lt;cstring&gt;

using namespace std;

const int N = 20;
const int INF = 0x3f3f3f3f;

int n, m;
int a[N][N];            //原始数组
int b[N][N];            //保存翻转次数的数组
int c[N][N];            //记录答案的数组
int dx[] = {0, 1, 0, -1, 0}, dy[] = {0, 0, -1, 0, 1};   //其实棋子并不受下方棋子的影响

bool out(int x, int y)
{
    if(x &lt; 0 || x &gt;= n|| y &lt; 0 || y &gt;= m)  return true;
    else  return false;
}

int get_color(int x, int y)
{
    int color = a[x][y];                                //初始颜色（这里是a）
    for(int i=0; i&lt;5; ++i)
    {
        int nx = x + dx[i], ny = y + dy[i];
        if(out(nx, ny))  continue;
        color += b[nx][ny];                             //这里是b
    }
    return color &amp; 1;                                   //本层翻转后的颜色（是固定的）
    //翻转后的颜色等于初始颜色+翻转影响产生的颜色（上，下，左，右，中五个方向）
}

int flip(int s)
{
    for(int i=1; i&lt;=m; ++i)  b[0][i-1] = (s&gt;&gt;(m-i)) &amp; 1;
    
    for(int i=1; i&lt;n; ++i)
    {
        for(int j=0; j&lt;m; ++j)
        {
            if(get_color(i-1, j))   b[i][j] = 1;  
            //由上一行的状态来递推出下一行的状态，因为上一行的上，左，右状态已经全部已知
            //而正是由上方的状态来递推出其下方的状态
        }
    }
    
    for(int i=0; i&lt;m; ++i)   if(get_color(n-1, i))   return INF;        //检查最后一层
    
    int times = 0;
    for(int i=0; i&lt;n; ++i)   for(int j=0; j&lt;m; ++j)  times += b[i][j];  //得出最小翻转次数
    return times;
}

int main()
{
    ios::sync_with_stdio(false);
    cin.tie(0), cout.tie(0);
    
    cin&gt;&gt;n&gt;&gt;m;
    
    for(int i=0; i&lt;n; ++i)  for(int j=0; j&lt;m; ++j)   cin&gt;&gt;a[i][j];
    
    int ans = INF;
    //枚举的是第一行所有可能的翻转动作（即：翻(1)或不翻(0)）
    for(int i=0; i &lt; (1&lt;&lt;m); ++i)        //状态压缩，枚举第一行所有可能的情况 ，后面的只需递推了
    {
        memset(b, 0, sizeof b);         //记得初始化b
        int t = flip(i);
        if(t &lt; ans)
        {
            ans = t;
            memcpy(c, b, sizeof b);     //复制状态
        }
    }
    
    if(ans == INF)  cout&lt;&lt;&quot;IMPOSSIBLE&quot;&lt;&lt;endl;
    else
    {
        for(int i=0; i&lt;n; ++i)
        {
            for(int j=0; j&lt;m; ++j)
            {
                cout&lt;&lt;c[i][j]&lt;&lt;' ';
            }
            cout&lt;&lt;endl;
        }
    }
    
    return 0;
}
</code></pre>

            </div>
          </article>
        </div>
        <div class="paper" data-aos="fade-in">
          
            <div class="next-post">
              <div class="next">
                下一篇
              </div>
              <a href="https://panker13.github.io/post/hello-gridea/">
                <h3 class="post-title">
                  Hello Gridea
                </h3>
              </a>
            </div>
          
        </div>
        
          
            <div class="paper" data-aos="fade-in">
              <div id="gitalk-container"></div>
            </div>
          

          
        
      </div>

      <div class="sm-12 md-4 col sidebar">
  <div class="paper info-container">
    <img src="https://panker13.github.io/images/avatar.png?v=1616496218498" class="no-responsive avatar">
    <div class="text-muted">整个世界森林里的老虎全都融化成黄油。</div>
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      最新文章
    </div>
    <div class="row">
      <ul>
        
          
            <li>
              <a href="https://panker13.github.io/post/suan-fa-xue-xi-cong-poj-shang-de-fliptile-dao-kai-guan-wen-ti/">算法学习：从poj上的Fliptile到开关问题</a>
            </li>
          
        
          
            <li>
              <a href="https://panker13.github.io/post/about/">关于</a>
            </li>
          
        
          
            <li>
              <a href="https://panker13.github.io/post/hello-gridea/">Hello Gridea</a>
            </li>
          
        
      </ul>
    </div>
  </div>
  <div class="paper">
    <div class="sidebar-title">
      标签列表
    </div>
    <div class="row">
      
        <a href="https://panker13.github.io/tag/RCxrVvqB7/" class="badge secondary">
          Gridea
        </a>
      
    </div>
  </div>
  <div class="paper">
    Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://panker13.github.io/atom.xml" target="_blank">RSS</a>
  </div>
</div>


    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '6aff252bf918c27b594e',
        clientSecret: '34f4d18197683815c879414023080ca0b45576da',
        repo: 'panker13.github.io',
        owner: 'panker13',
        admin: ['panker13'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
